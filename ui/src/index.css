@tailwind base;
@tailwind components;
@tailwind utilities;

:root {}

/* Light Mode */
.light,
:root:not(.dark) {
  /* ... your other variables ... */
  --code-header-bg: rgb(26, 26, 26);
  --code-bg: rgb(48, 48, 48);
  --code-text: #ffffff;
}

/* Dark Mode */
.dark {
  /* ... your other variables ... */
  --code-header-bg: rgb(16, 16, 16);
  --code-bg: rgb(26, 26, 26);
  --code-text: #ffffff;
}

/* Light Mode Variables */
.light,
:root:not(.dark) {
  --accent-primary: rgb(43, 43, 43);
  --bg-sidebar: #fafafa;
  --bg-primary: #fafafa;
  --bg-card: #fafafa;
  --text-primary: rgb(38, 38, 38);
  --text-secondary: #78df0a;
  --border-color: #e5e5e5;
  --user-chat-bubble-bg: rgb(43, 43, 43);
  --modal-bg: #ffffff;
  --table-header-bg: rgb(65, 65, 65);
  --table-header-text: white;
  --table-body-bg: #ffffff;
}

/* Dark Mode Variables */
.dark {
  --accent-primary: #ffffff;

  --bg-sidebar: rgb(38, 38, 38);

  /* neutral-900 */
  --bg-sidebar: rgb(26, 26, 26);

  /* neutral-900 */
  --bg-primary: rgb(26, 26, 26);

  /* neutral-800 */
  --bg-card: rgb(38, 38, 38);

  --text-primary: #fafafa;
  --text-secondary: #a3a3a3;
  --border-color: #383838;
  --user-chat-bubble-bg: rgb(56, 59, 61);
  --modal-bg: rgb(26, 26, 26);
  --table-header-bg: rgb(26, 26, 26);
  /* --table-header-text: rgb(23, 23, 23); */
  --table-header-text: white;
  --table-body-bg: rgb(30, 30, 30);
}

@layer base {
  body {
    @apply bg-bg-primary overflow-hidden antialiased;
    font-family: 'Outfit', system-ui, -apple-system, sans-serif;
  }
}

@layer components {

  /* Message bubbles with top corners */
  .bubble {
    @apply p-4 rounded-3xl max-w-[85%] relative break-words shadow-sm transition-all duration-100;
  }

  .user-bubble {
    background-color: var(--user-chat-bubble-bg);
    @apply rounded-tr-[8px];
    /* box-shadow: 0 4px 15px rgba(43, 43, 43, 0.2); */
  }

  /* .user-bubble .dark {
    @apply bg-accent-primary;
  } */

  .user-bubble * {
    @apply text-white !important;
  }

  .ai-bubble {
    @apply bg-neutral-100 dark:bg-neutral-50/5 rounded-tl-[8px];
    /* box-shadow: 0 4px 15px rgba(43, 43, 43, 0.2); */
  }

  .reasoning-bubble {
    @apply bg-amber-500/5 border border-amber-500/20 text-amber-500 italic text-[0.85rem] rounded-tl-[6px];
  }

  .nav-button-active {
    @apply bg-accent-primary text-white border-accent-primary;
    /* box-shadow: 0 0 15px rgba(99, 102, 241, 0.3); */
  }

  .chat-welcome {
    @apply flex flex-col items-center justify-center flex-1 h-full py-10;
  }

  .welcome-icon {
    @apply w-24 h-24 bg-accent-primary/10 rounded-3xl flex items-center justify-center text-accent-primary mb-6 animate-bounce;
    /* box-shadow: 0 0 30px rgba(99, 102, 241, 0.15); */
  }

  /* Loading dots */
  .loading-dots {
    @apply flex gap-1.5 p-3 px-5 bg-bg-card rounded-2xl border border-border-color mt-2 w-max;
  }

  .dot {
    @apply w-2 h-2 bg-neutral-500 rounded-full animate-bounce;
  }

  .dot:nth-child(2) {
    animation-delay: 0.1s;
  }

  .dot:nth-child(3) {
    animation-delay: 0.2s;
  }

  /* Theme-aware transparency backgrounds */
  .bg-white-trans {
    @apply bg-white/10 dark:bg-white/5;
  }

  .border-white-trans {
    @apply border-white/10 dark:border-white/5;
  }
}

/* Markdown adjustments for Light Mode */
.light .prose {
  --tw-prose-body: #404040;
  /* neutral-700 */
  --tw-prose-headings: #171717;
  /* neutral-900 */
  --tw-prose-links: #008cff;
  --tw-prose-bold: #171717;
  --tw-prose-counters: #737373;
  /* neutral-500 */
  --tw-prose-bullets: #d4d4d4;
  /* neutral-300 */
  --tw-prose-hr: #e5e5e5;
  /* neutral-200 */
  --tw-prose-quotes: #171717;
  --tw-prose-quote-borders: #e5e5e5;
  --tw-prose-captions: #737373;
  --tw-prose-code: #171717;
  --tw-prose-pre-code: #e5e5e5;
  --tw-prose-pre-bg: #262626;
  /* neutral-800 */
  --tw-prose-th-borders: #d4d4d4;
  --tw-prose-td-borders: #e5e5e5;
}

.dark .prose {
  --tw-prose-body: #ffffff;
  --tw-prose-headings: #ffffff;
  --tw-prose-links: #008cff;
  --tw-prose-bold: #ffffff;
  --tw-prose-counters: #ffffff;
  --tw-prose-bullets: #ffffff;
  --tw-prose-hr: #ffffff;
  --tw-prose-quotes: #ffffff;
  --tw-prose-quote-borders: #ffffff;
  --tw-prose-captions: #ffffff;
  --tw-prose-code: #ffffff;
  --tw-prose-pre-code: #ffffff;
  --tw-prose-pre-bg: #ffffff;
  --tw-prose-th-borders: #ffffff;
  --tw-prose-td-borders: #ffffff;
}

/* Condensed Prose for Chat */
.prose-chat {
  @apply max-w-none text-[15px];
}

.prose-chat p {
  @apply my-1.5 leading-relaxed;
}

.prose-chat p:first-child {
  @apply mt-0;
}

.prose-chat p:last-child {
  @apply mb-0;
}

.prose-chat ul,
.prose-chat ol {
  @apply my-2 pl-5 !important;
}

.prose-chat li {
  @apply my-1 !important;
}

.prose-chat li>p {
  @apply my-0 inline !important;
}

.prose-chat ul>li:first-child,
.prose-chat ol>li:first-child {
  @apply mt-0 !important;
}

.prose-chat ul>li:last-child,
.prose-chat ol>li:last-child {
  @apply mb-0 !important;
}

.prose-chat pre {
  @apply my-3;
}

.prose-chat h1,
.prose-chat h2,
.prose-chat h3,
.prose-chat h4,
.prose-chat h5,
.prose-chat h6 {
  @apply font-bold text-text-primary mt-6 mb-2 first:mt-0 tracking-tight;
}

.prose-chat h1 {
  @apply text-2xl;
}

.prose-chat h2 {
  @apply text-xl;
}

.prose-chat h3 {
  @apply text-lg;
}

.prose-chat h4 {
  @apply text-base;
}

.prose-chat strong,
.prose-chat b {
  @apply font-bold text-text-primary;
}

.prose-chat hr {
  @apply my-6 border-border-color;
}

.prose-chat blockquote {
  @apply pl-4 border-l-2 border-neutral-300 dark:border-neutral-700 italic text-text-secondary my-4;
}

/* Remove default backticks from prose inline code */
.prose-chat :where(code):not(:where([class~="not-prose"] *))::before,
.prose-chat :where(code):not(:where([class~="not-prose"] *))::after {
  content: "";
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-white/10 rounded-full;
}

.light ::-webkit-scrollbar-thumb {
  @apply bg-black/10;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-white/20;
}

.light ::-webkit-scrollbar-thumb:hover {
  @apply bg-black/20;
}

@layer utilities {
  .scrollbar-none::-webkit-scrollbar {
    display: none;
  }

  .scrollbar-none {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

@layer components {
  .table-row-hover:hover {
    background-color: var(--bg-secondary) !important;
    /* fallback */
    @apply bg-neutral-100 dark:bg-white/5;
  }
}